{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  {% if page_title %}
  <title>{{ page_title }} — ABOD</title>
  {% else %}
  <title>Home — ABOD</title>
  {% endif %}
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/static/main/style.css" />
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-left-group">
        <div class="navbar-section navbar-logo" style="display: flex; align-items: center; gap: 18px">
          <a href="{% url 'home' %}">
            <img src="{% static 'main/img/logo.jpg' %}" alt="Company Logo" style="height: 40px" />
          </a>
        </div>
        <ul class="navbar-section navbar-center">
          <li><a href="{% url 'markets' %}" {% if request.resolver_match.url_name == 'markets' %}class="active"{% endif %}>Markets</a></li>
          <li><a href="{% url 'services' %}" {% if request.resolver_match.url_name == 'services' %}class="active"{% endif %}>Services</a></li>
          <li><a href="{% url 'projects' %}" {% if request.resolver_match.url_name == 'projects' %}class="active"{% endif %}>Projects</a></li>
          <li><a href="{% url 'insights' %}" {% if request.resolver_match.url_name == 'insights' %}class="active"{% endif %}>Insights</a></li>
        </ul>
      </div>
      <ul class="navbar-section navbar-right">
        <li><a href="{% url 'about' %}" {% if request.resolver_match.url_name == 'about' %}class="active"{% endif %}>About</a></li>
        <li><a href="{% url 'careers' %}" {% if request.resolver_match.url_name == 'careers' %}class="active"{% endif %}>Careers</a></li>
        <li><a href="{% url 'news' %}" {% if request.resolver_match.url_name == 'news' %}class="active"{% endif %}>News</a></li>
        <li><a href="{% url 'contact' %}" {% if request.resolver_match.url_name == 'contact' %}class="active"{% endif %}>Contact</a></li>
        <li class="language-dropdown">
          <a href="#" title="Language" class="icon-link" id="lang-toggle">
            <!-- Globe SVG icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle cx="12" cy="12" r="10" stroke="#333" stroke-width="2" />
              <ellipse
                cx="12"
                cy="12"
                rx="4"
                ry="10"
                stroke="#333"
                stroke-width="2"
              />
              <line
                x1="2"
                y1="12"
                x2="22"
                y2="12"
                stroke="#333"
                stroke-width="2"
              />
            </svg>
          </a>
          <ul class="lang-menu" id="lang-menu">
            <li><a href="?lang=en">English</a></li>
            <li><a href="?lang=fr">French</a></li>
            <li><a href="?lang=de">German</a></li>
          </ul>
        </li>
        <li>
          <a href="#" title="Search" class="icon-link">
            <!-- Magnifying glass SVG icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle cx="11" cy="11" r="7" stroke="#333" stroke-width="2" />
              <line
                x1="16.5"
                y1="16.5"
                x2="21"
                y2="21"
                stroke="#333"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </a>
        </li>
      </ul>
      <!-- Hamburger menu for mobile -->
      <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </nav>

    <!-- Mobile menu -->
    <div class="mobile-menu" id="mobile-menu">
      <ul class="mobile-nav-links">
        <li><a href="{% url 'markets' %}" {% if request.resolver_match.url_name == 'markets' %}class="active"{% endif %}>Markets</a></li>
        <li><a href="{% url 'services' %}" {% if request.resolver_match.url_name == 'services' %}class="active"{% endif %}>Services</a></li>
        <li><a href="{% url 'projects' %}" {% if request.resolver_match.url_name == 'projects' %}class="active"{% endif %}>Projects</a></li>
        <li><a href="{% url 'insights' %}" {% if request.resolver_match.url_name == 'insights' %}class="active"{% endif %}>Insights</a></li>
        <li><a href="{% url 'about' %}" {% if request.resolver_match.url_name == 'about' %}class="active"{% endif %}>About</a></li>
        <li><a href="{% url 'careers' %}" {% if request.resolver_match.url_name == 'careers' %}class="active"{% endif %}>Careers</a></li>
        <li><a href="{% url 'news' %}" {% if request.resolver_match.url_name == 'news' %}class="active"{% endif %}>News</a></li>
        <li><a href="{% url 'contact' %}" {% if request.resolver_match.url_name == 'contact' %}class="active"{% endif %}>Contact</a></li>
      </ul>
      <div class="mobile-search">
        <form action="{% url 'search' %}" method="get">
          <input type="text" name="q" placeholder="Search..." />
          <button type="submit">Search</button>
        </form>
      </div>
      <div class="mobile-language">
        <a href="?lang=en">English</a>
        <a href="?lang=fr">French</a>
        <a href="?lang=de">German</a>
      </div>
    </div>

    <!-- Main content wrapper so footer can be pushed to the bottom -->
    <main class="site-main">
      <!-- Use the same results-style in-flow search bar as the search results page -->
  <div id="search-bar" class="results-search-wrapper navbar-results-search search-bar full-bleed">
        <form action="{% url 'search' %}" method="get" class="results-search-form">
          <div class="results-search-bar">
            <button type="submit" class="results-search-submit" aria-label="Submit search">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none">
                <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"/>
                <line x1="16.5" y1="16.5" x2="21" y2="21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
            <input type="text" name="q" placeholder="search ABOD" aria-label="Search ABOD" />
            <button type="button" class="results-search-clear" aria-label="Clear search">×</button>
          </div>
        </form>
      </div>

      <div class="tagline-below-navbar" id="dynamic-tagline">
        we are making innovation sustainable
      </div>

      <!-- Large rounded rectangle with image -->
      <div class="large-rounded-rectangle slide-up">
        <img
          src="{% static 'main/img/hero.jpg' %}"
          alt="Showcase"
          class="rectangle-image"
        />
      </div>

      <h2 class="below-rectangle-header slide-up">
        Engineering for people and the planet
      </h2>
      <p class="below-rectangle-subtext slide-up">
        Our experts are leading the way
      </p>
      <a href="{% url 'services' %}" class="below-rectangle-link slide-up"
        >Services</a
      >

      <h2 class="section-header slide-up">Building Information Modeling</h2>
      <p class="section-subtext slide-up">
        Creating and managing digital information about built assets, from
        design
        <br />and construction through to operatioin and maintenance.
      </p>

      <!-- 4 Cards below the building section -->
      <div
        class="four-cards-grid slide-up"
        style="
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
          grid-auto-rows: 100px;
          gap: 30px;
          max-width: 96vw;
          margin: 40px auto 0 auto;
          padding: 0 2vw;
          justify-items: center;
        "
      >
        <div
          class="card masonry-card"
          style="
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.07);
            grid-row-end: span 5;
          "
        >
          <img
            src="{% static 'main/img/chisinau-arena-sunset-moldova.jpg' %}"
            alt="Card 1"
            style="width: 100%; height: 500px; object-fit: cover"
          />
        </div>
        <div
          class="card masonry-card"
          style="
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.07);
            grid-row-end: span 6;
          "
        >
          <img
            src="{% static 'main/img/low-angle-red-geometrical-structure-blue-sky.jpg' %}"
            alt="Card 2"
            style="width: 100%; height: 600px; object-fit: cover"
          />
        </div>
        <div
          class="card masonry-card"
          style="
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.07);
            grid-row-end: span 4;
            position: relative;
          "
        >
          <img
            src="{% static 'main/img/looking-up.jpg' %}"
            alt="Card 3"
            style="width: 100%; height: 400px; object-fit: cover"
          />
          <div
            class="card-overlay"
            style="
              position: absolute;
              bottom: 0;
              left: 0;
              right: 0;
              background: rgba(0, 0, 0, 0.7);
              color: white;
              padding: 15px;
              opacity: 0;
              transition: opacity 0.3s;
              text-align: center;
            "
          >
            <a
              href="/issues/"
              style="
                color: white;
                text-decoration: none;
                font-family: 'Georgia Pro', Georgia, serif;
                font-size: 1.15em;
                opacity: 1;
              "
              >Issues</a
            >
            <p
              style="
                font-size: 0.9em;
                margin-top: 5px;
                font-family: 'Georgia Pro', Georgia, serif;
              "
            >
              Our experts are leading the way in sustainable engineering,
              combining innovation with environmental responsibility to create
              structures that stand the test of time.
            </p>
          </div>
        </div>
        <div
          class="card masonry-card"
          style="
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.07);
            grid-row-end: span 6;
          "
        >
          <img
            src="{% static 'main/img/clear-glass-walled-building-blue-sky.jpg' %}"
            alt="Clear Glass Walled Building Blue Sky"
            style="width: 100%; height: 550px; object-fit: cover"
          />
        </div>
        <!-- Additional links around the cards -->
        <div class="card-link" style="text-align: center; padding: 20px">
          <a
            href="/news/"
            style="
              opacity: 0.45;
              text-decoration: none;
              color: #222;
              font-family: 'Georgia Pro', Georgia, serif;
              font-size: 0.9em;
            "
            >News</a
          >
        </div>
        <div class="card-link" style="text-align: center; padding: 20px">
          <a
            href="{% url 'insights' %}"
            style="
              opacity: 0.45;
              text-decoration: none;
              color: #222;
              font-family: 'Georgia Pro', Georgia, serif;
              font-size: 0.9em;
            "
            >Issues</a
          >
          <p
            style="
              font-size: 2em;
              color: #222;
              margin-top: 5px;
              font-family: 'Georgia Pro', Georgia, serif;
            "
          >
            Our experts are leading the way in sustainable engineering.
          </p>
        </div>
        <div class="card-link" style="text-align: center; padding: 20px">
          <a
            href="/projects/"
            style="
              opacity: 0.45;
              text-decoration: none;
              color: #222;
              font-family: 'Georgia Pro', Georgia, serif;
              font-size: 0.9em;
            "
            >Projects</a
          >
          <p
            style="
              font-size: 2em;
              color: #222;
              margin-top: 5px;
              font-family: 'Georgia Pro', Georgia, serif;
            "
          >
            Discover our innovative projects shaping the future.
          </p>
        </div>
      </div>

      <!-- OUR WORK section -->
      <div class="our-work-section slide-up">
        <h2 class="our-work-header">Our Work</h2>
        <a href="/projects/" class="see-projects-button">See Projects →</a>
      </div>
      <p class="section-subtext slide-up">
        Showcasing our latest projects and achievements in engineering and
        sustainability.
      </p>

      <!-- Work Showcase Cards -->
      <div class="work-showcase slide-up">
        <div class="work-images">
          <img
            src="{% static 'main/img/chisinau-arena-sunset-moldova.jpg' %}"
            alt="Urban Development Project"
          />
          <img
            src="{% static 'main/img/low-angle-red-geometrical-structure-blue-sky.jpg' %}"
            alt="Innovative Engineering"
          />
          <img
            src="{% static 'main/img/looking-up.jpg' %}"
            alt="Sustainable Architecture"
          />
          <img
            src="{% static 'main/img/clear-glass-walled-building-blue-sky.jpg' %}"
            alt="Modern Construction"
          />
        </div>
        <div class="work-texts">
          <div class="work-text">
            <h3>Urban Development</h3>
            <p>
              Creating sustainable urban spaces that blend innovation with
              community needs.
            </p>
          </div>
          <div class="work-text">
            <h3>Innovative Engineering</h3>
            <p>
              Advancing engineering solutions for complex challenges in modern
              construction.
            </p>
          </div>
          <div class="work-text">
            <h3>Sustainable Architecture</h3>
            <p>
              Designing buildings that harmonize with the environment and future
              generations.
            </p>
          </div>
          <div class="work-text">
            <h3>Modern Construction</h3>
            <p>
              Implementing cutting-edge techniques for efficient and resilient
              structures.
            </p>
          </div>
        </div>
      </div>

      <!-- Our People section removed per request -->

      <section class="issues-section">
        <div class="issues-header">
          <div class="header-content">
            <div>
              <h1 class="issues-title">Issues</h1>
              <p class="issues-description">
                We explore some of the biggest questions facing the built and
                natural environments.
              </p>
            </div>
            <button class="view-more-btn">
              View more issues
              <span class="arrow-icon">→</span>
            </button>
          </div>
        </div>

        <div class="issues-content">
          <a href="#" class="issue-card card-orange">
            <img
              src="{% static 'main/img/chisinau-arena-sunset-moldova.jpg' %}"
              alt="City skyline"
              class="card-fill"
            />
            <div class="card-content">
              <span class="card-label">Issue</span>
              <h2 class="card-title">
                How do we create climate-resilient, energy-efficient buildings?
              </h2>
            </div>
          </a>

          <a href="#" class="issue-card card-red">
            <img
              src="{% static 'main/img/low-angle-red-geometrical-structure-blue-sky.jpg' %}"
              alt="High-speed rail"
              class="card-fill"
            />
            <div class="card-content">
              <span class="card-label">Issue</span>
              <h2 class="card-title">
                How do we tackle high-end, technically challenging developments?
              </h2>
            </div>
          </a>

          <a href="#" class="issue-card card-green">
            <img
              src="{% static 'main/img/looking-up.jpg' %}"
              alt="Industrial community"
              class="card-fill"
            />
            <div class="card-content">
              <span class="card-label">Issue</span>
              <h2 class="card-title">
                How do we Prioritize inclusive, user-focused solutions?
              </h2>
            </div>
          </a>
        </div>
      </section>
    </main>

    <!-- Footer: full-bleed red block immediately after Issues section -->
    <footer class="footer-right">
      <div class="container footer-inner">
        <div class="footer-left">
          <h3 class="site-name">ABOD</h3>
          <p class="site-desc">© 2025 ABOD — All rights reserved</p>
          <p class="footer-blurb">
            Designing sustainable places and systems. We work across markets to
            make long-term, people-centred change.
          </p>
        </div>

        <div class="footer-right-columns">
          <nav class="footer-col">
            <h4>Explore</h4>
            <ul>
              <li><a href="{% url 'markets' %}">Markets</a></li>
              <li><a href="{% url 'services' %}">Services</a></li>
              <li><a href="{% url 'projects' %}">Projects</a></li>
              <li><a href="{% url 'insights' %}">Insights</a></li>
            </ul>
          </nav>

          <nav class="footer-col">
            <h4>Company</h4>
            <ul>
              <li><a href="{% url 'about' %}">About</a></li>
              <li><a href="{% url 'careers' %}">Careers</a></li>
              <li><a href="{% url 'news' %}">News</a></li>
              <li><a href="{% url 'contact' %}">Contact</a></li>
            </ul>
          </nav>
        </div>
      </div>

      <!-- Divider + social icons row -->
      <div class="footer-bottom">
        <div class="container footer-bottom-inner">
          <div class="footer-divider" aria-hidden="true"></div>

          <div class="footer-socials" aria-label="Social links">
            <a href="#" class="social-link" aria-label="LinkedIn">
              <!-- LinkedIn SVG -->
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path
                  d="M4.98 3.5C4.98 4.60457 4.09 5.5 2.98 5.5C1.87 5.5 1 4.60457 1 3.5C1 2.39543 1.87 1.5 2.98 1.5C4.09 1.5 4.98 2.39543 4.98 3.5Z"
                  fill="currentColor"
                />
                <path d="M1.5 8.5H4.5V22H1.5V8.5Z" fill="currentColor" />
                <path
                  d="M8.5 8.5H11.3V10.2H11.3C11.8 9.25 13.1 8.22 15.4 8.22C19.9 8.22 20.5 10.9 20.5 14.6V22H17.5V15.7C17.5 13.7 17.4 11.2 14.2 11.2C11 11.2 10.6 13.5 10.6 15.6V22H7.6V8.5H8.5Z"
                  fill="currentColor"
                />
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="Twitter">
              <!-- Twitter SVG -->
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path
                  d="M22 5.92C21.09 6.25 20.13 6.47 19.13 6.56C20.15 6 20.92 5.07 21.28 3.94C20.31 4.46 19.25 4.84 18.12 5.03C17.2 4.06 15.92 3.44 14.5 3.44C11.9 3.44 9.8 5.54 9.8 8.14C9.8 8.47 9.83 8.78 9.9 9.08C6.49 8.92 3.48 7.19 1.67 4.71C1.25 5.4 1 6.19 1 7.04C1 8.62 1.84 9.99 3.11 10.78C2.28 10.76 1.5 10.54 0.8 10.17C0.8 10.19 0.8 10.22 0.8 10.24C0.8 12.46 2.32 14.35 4.36 14.86C3.58 15.08 2.76 15.16 1.91 15.06C2.63 16.9 4.28 18.25 6.22 18.29C4.6 19.55 2.57 20.32 0.35 20.32C-0.05 20.32 -0.44 20.3 -0.82 20.25C1.11 21.57 3.35 22.33 5.78 22.33C14.49 22.33 18.53 14.18 18.53 8.69C18.53 8.51 18.53 8.33 18.52 8.16C19.5 7.52 20.33 6.72 21 5.8L22 5.92Z"
                  fill="currentColor"
                />
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="Instagram">
              <!-- Instagram SVG -->
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path
                  d="M7 2C4.24 2 2 4.24 2 7V17C2 19.76 4.24 22 7 22H17C19.76 22 22 19.76 22 17V7C22 4.24 19.76 2 17 2H7ZM12 7.5C14.49 7.5 16.5 9.51 16.5 12C16.5 14.49 14.49 16.5 12 16.5C9.51 16.5 7.5 14.49 7.5 12C7.5 9.51 9.51 7.5 12 7.5ZM18.5 6.1C18.5 6.66 18.06 7.1 17.5 7.1C16.94 7.1 16.5 6.66 16.5 6.1C16.5 5.54 16.94 5.1 17.5 5.1C18.06 5.1 18.5 5.54 18.5 6.1Z"
                  fill="currentColor"
                />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </footer>

    <script>
      const taglines = [
        "we are making innovation sustainable",
        "we are designing structures for life",
        "we are engineering the change we want to see",
      ];

      function animateTaglineChange(newText) {
        const taglineEl = document.getElementById("dynamic-tagline");
        // Animate out (move up and fade out)
        taglineEl.style.transition = "transform 0.3s, opacity 0.3s";
        taglineEl.style.transform = "translateY(-40px)";
        taglineEl.style.opacity = "0";
        setTimeout(() => {
          taglineEl.textContent = newText;
          // Animate in (drop down and fade in)
          taglineEl.style.transition = "none";
          taglineEl.style.transform = "translateY(40px)";
          setTimeout(() => {
            taglineEl.style.transition =
              "transform 0.4s cubic-bezier(.23,1.01,.32,1), opacity 0.4s";
            taglineEl.style.transform = "translateY(0)";
            taglineEl.style.opacity = "1";
          }, 10);
        }, 300);
      }

      document.addEventListener("DOMContentLoaded", function () {
        const taglineEl = document.getElementById("dynamic-tagline");
        // Pick a random tagline different from the default
        let current = taglineEl.textContent.trim();
        let options = taglines.filter((t) => t !== current);
        let newTagline = options[Math.floor(Math.random() * options.length)];
        animateTaglineChange(newTagline);

        // Optional: animate on logo click if you want instant change without reload
        document
          .querySelector(".navbar-logo a")
          .addEventListener("click", function (e) {
            if (window.location.pathname === "/") {
              e.preventDefault();
              let options = taglines.filter(
                (t) => t !== taglineEl.textContent.trim()
              );
              let newTagline =
                options[Math.floor(Math.random() * options.length)];
              animateTaglineChange(newTagline);
            }
          });

        // Search icon click is handled globally by main/site-search.js
        // (Removed the inline handler to avoid duplicate/timing conflicts.)

        // Language dropdown toggle
        const langToggle = document.getElementById("lang-toggle");
        const langMenu = document.getElementById("lang-menu");
        if (langToggle && langMenu) {
          langToggle.addEventListener("click", function (e) {
            e.preventDefault();
            langMenu.classList.toggle("show");
          });
          document.addEventListener("click", function (e) {
            if (
              !langToggle.contains(e.target) &&
              !langMenu.contains(e.target)
            ) {
              langMenu.classList.remove("show");
            }
          });
        }

        // Work showcase hover animation
        const workImages = document.querySelectorAll(".work-images img");
        const workTexts = document.querySelectorAll(".work-text");
        workImages.forEach((img, index) => {
          img.addEventListener("mouseenter", () => {
            workTexts[index].classList.add("animate");
          });
          img.addEventListener("mouseleave", () => {
            workTexts[index].classList.remove("animate");
          });
        });

        // Staff showcase hover animation
        const staffImages = document.querySelectorAll(".staff-images img");
        const staffTexts = document.querySelectorAll(".staff-text");
        staffImages.forEach((img, index) => {
          img.addEventListener("mouseenter", () => {
            staffTexts[index].classList.add("animate");
          });
          img.addEventListener("mouseleave", () => {
            staffTexts[index].classList.remove("animate");
          });
        });

        // Scroll animation observer
        const observerOptions = {
          threshold: 0.1,
          rootMargin: "0px 0px -50px 0px",
        };

        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
            }
          });
        }, observerOptions);

        // Observe all slide-up elements
        document.querySelectorAll(".slide-up").forEach((el) => {
          observer.observe(el);
        });

        // mobile menu behavior is centralized in main/site-search.js
      });
    </script>
    <script src="{% static 'main/site-search.js' %}"></script>
  </body>
</html>
